---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import TimelineLine from '@/components/port/TimelineLine'
import TuiCard from '@/components/port/TuiCard'
import TuiHeading from '@/components/TuiHeading.astro'
import Layout from '@/layouts/Layout.astro'

// Color mapping for skills
const tagColors = {
  react: 'bg-secondary/20 text-[#89b4fa]',
  typescript: 'bg-secondary/20 text-[#74c7ec]',
  javascript: 'bg-secondary/20 text-[#f9e2af]',
  node: 'bg-secondary/20 text-[#a6e3a1]',
  aws: 'bg-secondary/20 text-[#f5c2e7]',
  vue: 'bg-secondary/20 text-[#94e2d5]',
  database: 'bg-secondary/20 text-[#cba6f7]',
  python: 'bg-secondary/50',
  firebase: 'bg-secondary/20 text-[#f38ba8]',
  mongo: 'bg-secondary/20 text-[#74c7ec]',
  default: 'bg-secondary/50',
}

// Helper function to get skill color
const getSkillColor = (skill: string): string => {
  const lowerSkill = skill.toLowerCase()
  if (lowerSkill.includes('react')) return tagColors.react
  if (lowerSkill.includes('typescript')) return tagColors.typescript
  if (lowerSkill.includes('javascript') || lowerSkill.includes('jquery'))
    return tagColors.javascript
  if (lowerSkill.includes('node') || lowerSkill.includes('express'))
    return tagColors.node
  if (lowerSkill.includes('aws') || lowerSkill.includes('cloud'))
    return tagColors.aws
  if (lowerSkill.includes('vue')) return tagColors.vue
  if (lowerSkill.includes('mongo') || lowerSkill.includes('db'))
    return tagColors.database
  if (lowerSkill.includes('python')) return tagColors.python
  if (lowerSkill.includes('firebase')) return tagColors.firebase
  return tagColors.default
}

// Experience data
const experiences = [
  {
    id: 1,
    title: 'Production Engineering Fellow',
    company: 'Meta & MLH Fellowship',
    period: '2025',
    description: 'Learned DevOps and SysAdmin topics through this Co-op. ',
    skills: ['Python', 'Bash', 'SQL', 'Observability', 'CI/CD', 'Linux'],
    highlights: [
      'Learned DevOps and SysAdmin topics through this Co-op',
      'Dockerized everything',
      'Stress tested our VPS through some very silly scripts',
    ],
  },
  {
    id: 2,
    title: 'CS Tutor',
    company: 'UC Merced - STEM Tutoring Hub',
    period: '2025 - Present',
    description: 'Provided guidance to students in computer science topics.',
    skills: ['C', 'C++', 'Python', 'Teaching', 'Drawing'],
    highlights: [
      'Taught students algorithms and data structures',
      'Discussed philosophy with coworkers',
    ],
  },
  {
    id: 3,
    title: 'Machine Learning Intern',
    company: 'Wilsilica - Lumos Control',
    period: '2022 - 2023',
    description:
      'Implemented tiny machine learning models into smart lighting.',
    skills: ['Python', 'Tensorflow', 'Google Coral', 'ML', 'SSH'],
    highlights: [
      'Created smart lighting prototypes for company',
      'Made gesture based lighting controls for live demos',
      'Gathered, annotated, and trained in-house models',
    ],
  },
]

// Education data
const education = [
  {
    id: 1,
    degree: 'B.S. Computer Science and Engineering',
    institution: 'University of California, Merced',
    period: '2023 - Present',
    description: "Unexpectedly, there's more than just cows and farmland here.",
  },
  {
    id: 2,
    degree: 'High School',
    institution: 'Canyon Crest Academy',
    period: '2019 - 2023',
    description: "I wouldn't have eaten the pizza here if it wasn't free.",
  },
]
---

<Layout>
  <PageHead slot="head" title="Experiences" />
  <Breadcrumbs items={[{ label: 'Experiences', icon: 'lucide:briefcase' }]} />

  <div class="mx-auto max-w-4xl">
    <!-- Header -->
    <!-- <div class="mb-8 text-center">
      <h1 class="mb-2 text-4xl md:text-5xl">My Experiences</h1>
      <p class="text-muted-foreground text-lg">
        some relevant things i've done
      </p>
    </div> -->

    <!-- Timeline Section -->
    <section class="mb-12">
      <div class="mb-6 flex justify-center">
        <TuiCard client:load className="compact px-6 pt-6 pb-3">
          <TuiHeading level={2}>Experience</TuiHeading>
        </TuiCard>
      </div>

      <!-- Timeline with connecting lines -->
      <div class="flex flex-col items-center">
        {
          experiences.map((exp, index) => (
            <>
              {/* Timeline connector before card (except first) */}
              {index > 0 && (
                <div class="flex justify-center">
                  <TimelineLine client:load className="h-8" />
                </div>
              )}

              {/* Experience card */}
              <TuiCard client:load className="p-0 w-full max-w-2xl">
                <div class="p-6">
                  {/* Header Row */}
                  <div class="mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-between">
                    <div>
                      <h3 class="text-secondary text-xl font-bold">
                        {exp.title}
                      </h3>
                      <p class="text-muted-foreground">{exp.company}</p>
                    </div>
                    <span class="text-muted-foreground mt-1 font-mono text-sm sm:mt-0">
                      {exp.period}
                    </span>
                  </div>

                  {/* Description */}
                  <p class="mb-4">{exp.description}</p>

                  {/* Skills */}
                  <div class="mb-4 flex flex-wrap gap-2">
                    {exp.skills.map((skill) => (
                      <span
                        class:list={[
                          'rounded-full px-2 py-1 text-xs',
                          getSkillColor(skill),
                        ]}
                      >
                        {skill}
                      </span>
                    ))}
                  </div>

                  {/* Highlights */}
                  <div>
                    <h4 class="mb-2 font-medium">Notes:</h4>
                    <ul class="text-muted-foreground list-outside list-disc space-y-1 pl-5 text-sm">
                      {exp.highlights.map((highlight) => (
                        <li>{highlight}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </TuiCard>
            </>
          ))
        }
      </div>
    </section>

    <!-- Education Section -->
    <section>
      <div class="mb-6 flex justify-center">
        <TuiCard client:load className="compact px-6 pt-6 pb-3">
          <TuiHeading level={2}>Education</TuiHeading>
        </TuiCard>
      </div>

      <!-- Education cards with timeline -->
      <div class="flex flex-col items-center gap-0">
        {
          education.map((edu, index) => (
            <>
              {index > 0 && (
                <div class="flex justify-center">
                  <TimelineLine client:load className="h-8" />
                </div>
              )}
              <TuiCard client:load className="p-0 w-full max-w-2xl">
                <div class="p-6">
                  <h3 class="text-secondary mb-1 text-lg font-bold">
                    {edu.degree}
                  </h3>
                  <p class="text-muted-foreground mb-1">{edu.institution}</p>
                  <p class="text-muted-foreground mb-3 font-mono text-sm">
                    {edu.period}
                  </p>
                  <p>{edu.description}</p>
                </div>
              </TuiCard>
            </>
          ))
        }
      </div>
    </section>
  </div>
</Layout>
